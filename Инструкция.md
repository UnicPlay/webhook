## Запуск рабочих потоков в Gitea Actions
Требования: локальные копии репозиториев [docs](https://github.com/UnicPlay/docs) 
и [webhook](https://github.com/UnicPlay/webhook)

Порядок действий:
1. Клонировать репозитории
2. Зайти в папку webhook
3. Запустить в терминале `docker-compose up -d gitea` (далее Терминал1)
4. Зайти на http://0.0.0.0:3000 (Gitea)
5. Сконфигурировать Gitea 
6. Зарегистрировать пользователя/пользователей (первый зарегистрированный автоматически приобретает права администратора)
7. Открыть webhook/gitea/gitea/conf/app.ini
8. Изменить ROOT_URL на http://gitea:3000
9. Добавить в конец файла 
    ```ini 
    [actions]
    ENABLED=true 
    ```
10. В терминале из п.3 запустить `docker-compose down && docker-compose up -d gitea`
11. Зайти на [Gitea](http://0.0.0.0:3000)
12. Создать пустой репозиторий
13. Зайти в docs
14. Запустить в терминале `git remote add origin http://0.0.0.0:3000/user/repo.git` (далее Терминал2), где:
    - `user` - ваше имя пользователя Gitea
    - `repo` - ваше название репозитория на Gitea
15. Запустить в Терминале2 `git push origin --all`, ввести данные своего аккаунта Gitea
16. Зайти в созданный репозиторий, в верхней правой части экрана нажать "Настройки",
    затем пролистать вниз, пункт "Включить действия репозитория" отметить галочкой, нажать ближайшую снизу кнопку "Сохранить настройки"
    ![img.png](https://i.imgur.com/Kz0zg8W.png)
17. В левой части страницы нажать "Действия" -> "Раннеры", в правом верхнем углу нажать "Создать новый раннер", скопировать token
18. Зайти в папку webhook, открыть docker-compose.yml, в самом низу поменять token на ваш, сохранить файл
19. Запустить в Терминале1 `docker-compose down && docker-compose up -d`
20. Убедиться, что в репозитории на Gitea появилась вкладка "Действия", а в "Настройки" -> "Действия" -> "Раннеры" появился ваш раннер
    1. Если их нет - подождите 5 секунд и перезагрузите страницу
    2. Если всё ещё нет - проверьте правильность выполнения пунктов 16-20

21. Теперь при запуске любого push-запроса в Gitea на ветку репозитория будет выполняться её сборка, процесс сборки можно наблюдать во вкладке "Действия"
22. На http://0.0.0.0:8000 (webhook) будет индексная страница со всеми собранными и собираемыми ветками
23. При запуске действия через некоторое время страница собираемой ветки появится на webhook'e
